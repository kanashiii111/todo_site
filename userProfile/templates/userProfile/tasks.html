{% load static %}

<!DOCTYPE html>
<html>
<head>
    <title>Настройки</title>
    <link rel="stylesheet" href="{% static 'userProfile/css/tasks.css' %}">
</head>
<body>
    {% block content %}
    <div class="tasks-container">
        <h1>Список задач</h1>
        
        {% for task in filter.qs %}
            <button class="task-button" onclick="openTaskModal('{{ task.title }}', '{{ task.description }}', '{{ task.isCompleted }}', '{{ task.tag }}', '{{ task.priority }}', '{{ task.date_due }}')">
                {{ task.title }}
            </button>
            
            <div id="modal-{{ forloop.counter }}" class="modal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeModal('modal-{{ forloop.counter }}')">&times;</span>
                    <h3>Название: {{ task.title }}</h3>
                    <p>Описание: {{ task.description }}</p>
                    <p>Статус: {% if task.isCompleted %}Выполнено{% else %}В работе{% endif %}</p>
                    <p>Тег: {{ task.tag }}</p>
                    <p>Приоритетность: {{ task.priority }}</p>
                    <p>Срок выполнения: {{ task.date_due }}</p>
                </div>
            </div>
        {% empty %}
            <p>Нет задач</p>
        {% endfor %}
        
        <form method="get" action="{% url 'task_creation' %}">
            <button type="submit" class="create-task-btn">Создать задачу</button>
        </form>
        <form method="get">
            {{ filter.form.as_p }}
            <button type="submit">Фильтровать</button>
        </form>
    </div>
    {% endblock %}

    <div class="navigation-container">
        <nav class="navigation">
            <a href="{% url 'settings' %}" class="nav-button">Профиль</a>
            <a href="{% url 'tasks' %}" class="nav-button">Задачи</a>
            <a href="{% url 'calendar' %}" class="nav-button">Календарь</a>
        </nav>
    </div>

    <script>
        function openTaskModal(title, description, isCompleted, tag, priority, date_due) {
            alert(`
            Название: ${title}\n
            Описание: ${description}\n
            Статус: ${isCompleted ? 'Выполнено' : 'В работе'}\n
            Тег: ${tag}\n
            Приоритетность: ${priority}\n
            Срок выполнения: ${date_due}`);
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
    </script>
</body>
</html>